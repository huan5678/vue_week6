"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[52],{1219:function(t,e,a){a.d(e,{Z:function(){return g}});var o=a(6252),n=a(2262),r=a(8262),c=a(9669),s=a.n(c);const d=(0,r.Q_)("admin",(()=>{const t=(0,o.f3)("axios"),e="https://vue3-course-api.hexschool.io/v2/",a=(0,n.iH)(""),r=(0,n.iH)(""),c=(0,n.iH)(!1);function d(){s().defaults.headers.common.Authorization=a.value,t.post(`${e}api/user/check`).then((t=>(c.value=t.data.success,t.data.success))).catch((t=>(console.dir(t),c.value=t.response.data.success,t.response.data.success)))}function l(){const t=document.cookie.split("; backendToken="),e=t.shift().split(";");return e.forEach((t=>{t.trim().startsWith("backendToken=")&&(a.value=t.trim().split("=")["1"])})),t}function i(t){a.value=t.token,r.value=t.expired,c.value=!0,document.cookie=`backendToken=${t.token}; expires=${new Date(t.expired)};`}function u(){c.value=!1,a.value="",r.value="",t.post(`${e}api/user/logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:r,isLoggedIn:c,handleSetLogin:i,handleSetLogout:u,handleCheckUser:d,handleGetToken:l,handleClearToken:p}}));const l=(0,r.Q_)("adminProduct",(()=>{const t=(0,o.f3)("axios"),e="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,n.qj)({products:[],pagination:{},currentPage:1,category:null,tempProduct:{}}),c=(0,n.qj)({selected:""});function s(t,e){c.selected=t,r.tempProduct=e}const l=d();function i(){t.get(`${e}api/${a}/admin/products/all`,{token:l.token}).then((t=>{r.products=t.data.products})).catch((t=>{console.dir(t)}))}function u(o=r.currentPage,n=r.category){let c=n;null===n&&(c=""),t.get(`${e}api/${a}/admin/products?page=${o}${c}`,{token:l.token}).then((t=>{r.products=t.data.products,r.pagination=t.data.pagination})).catch((t=>{console.dir(t)}))}function p(o,n){t.put(`${e}api/${a}/admin/product/${o}`,n,{token:l.token}).then((()=>{u()})).catch((t=>{console.dir(t)}))}function g(o){t.delete(`${e}api/${a}/admin/product/${o}`,{token:l.token}).then((()=>{u()})).catch((t=>{console.dir(t)}))}function h(o){t.post(`${e}api/${a}/admin/product`,o,{token:l.token}).then((()=>{u(r.currentPage)})).catch((t=>{console.dir(t)}))}function f(o){const n=new FormData;return n.append("file-to-upload",o),t.post(`${e}api/${a}/admin/upload`,n,{token:l.token})}return{productList:r,functionSelected:c,handleCreateProduct:h,handleGetProductAll:i,handleGetProductList:u,handleEditProduct:p,handleDeleteProduct:g,handleImageUpload:f,handleSelectFunction:s}}));const i=(0,r.Q_)("product",(()=>{const t=(0,o.f3)("axios"),e="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,n.qj)({products:[],pagination:{},currentPage:1,productDetail:{}}),c=(0,n.iH)(""),s=(0,n.iH)([]);function d(){t.get(`${e}api/${a}/products/all`).then((t=>{r.products=t.data.products,t.data.products.forEach((t=>{s.value.includes(t.category)||s.value.push(t.category)}))})).catch((t=>{console.dir(t)}))}function l(o="",n=r.currentPage){let c=o;"all"===o&&(c=""),console.log(c),t.get(`${e}api/${a}/products?page=${n}&category=${c}`).then((t=>{r.products=t.data.products,r.pagination=t.data.pagination})).catch((t=>{console.dir(t)}))}function i(o){c.value=o,t(`${e}api/${a}/product/${o}`).then((t=>{c.value="",r.productDetail=t.data.product})).catch((t=>{console.dir(t),c.value=""}))}return{productList:r,handleGetProductAll:d,handleGetProductList:l,productCategory:s,handleGetProductDetail:i,isLoading:c}}));const u=(0,r.Q_)("cart",(()=>{const t=(0,o.f3)("axios"),e="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,n.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0}),c=(0,n.iH)("");function s(){t.get(`${e}api/${a}/cart`).then((t=>{r.list=t.data.data.carts,r.totalPrice=t.data.data.total,r.finalPrice=t.data.data.final_total})).catch((t=>{console.dir(t)}))}function d(o,n=1){c.value=o,t.post(`${e}api/${a}/cart`,{data:{product_id:o,qty:n}}).then((t=>{r.data=t.data.data,r.message=t.data.message,c.value="",s()})).catch((t=>{console.dir(t),c.value=""}))}function l(o){c.value=o,t.delete(`${e}api/${a}/cart/${o}`).then((t=>{r.message=t.data.message,c.value="",s()})).catch((t=>{console.dir(t),c.value=""}))}function i(o,n){c.value=o,t.put(`${e}api/${a}/cart/${o}`,{data:{data:{product_id:o,qty:n}}}).then((t=>{r.message=t.data.message,c.value="",s()})).catch((t=>{console.dir(t),c.value=""}))}function u(){t.delete(`${e}api/${a}/carts`).then((t=>{r.message=t.data.message,s()})).catch((t=>{console.dir(t)}))}return{cartData:r,isLoading:c,handleAddCart:d,handleGetCart:s,handleDeleteCart:l,handleUpdateCart:i,handleClearCart:u}}));const p=(0,r.Q_)("order",(()=>{const t=(0,o.f3)("axios"),e="https://vue3-course-api.hexschool.io/v2/",a="club",{handleGetCart:r}=u(),c=(0,n.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),s=(0,n.qj)({success:!1,orders:[],pagination:{},message:[]});function d(o){t.post(`${e}api/${a}/order`,{data:{user:{name:o.name,email:o.email,tel:o.tel,address:o.address},message:o.message}}).then((t=>{c.success=t.data.success,c.message=t.data.message,c.total=t.data.total,c.create_at=t.data.create_at,c.orderId=t.data.orderId,r()})).catch((t=>{console.dir(t)}))}function l(){t.get(`${e}api/${a}/orders`).then((t=>{s.success=t.data.success,s.orders=t.data.orders,s.pagination=t.data.pagination,s.message=t.data.message})).catch((t=>{console.dir(t)}))}return{orderResult:c,orderList:s,handleSendOrder:d,handleGetOrderList:l}}));function g(){const t=d(),e=l(),a=i(),o=p(),n=u();return{adminStore:t,adminProductStore:e,productStore:a,orderStore:o,cartStore:n}}},7944:function(t,e,a){a.d(e,{Z:function(){return i}});var o=a(6252);const n=["href"];function r(t,e,a,r,c,s){const d=(0,o.up)("router-link");return r.isExternalLink?((0,o.wg)(),(0,o.iD)("a",(0,o.dG)({key:0},t.$attrs,{rel:"noopener",href:t.to,target:"_blank"}),[(0,o.WI)(t.$slots,"default")],16,n)):((0,o.wg)(),(0,o.j4)(d,(0,o.dG)({key:1},t.$props,{class:["py-2 px-3 font-medium text-gray-500 border-b-2 border-transparent transition duration-300 ease-in-out",r.isActive?"border-primary-300 focus:border-primary-700 hover:border-primary-700 text-gray-900":"text-gray-300 hover:border-gray-300 hover:text-gray-700 focus:border-gray-300\n        focus:text-gray-700"]}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16,["class"]))}var c=a(2119),s={props:{...c.rH.props},setup(t){const{route:e,href:a,isActive:n,isExactActive:r,navigate:s}=(0,c.nB)(t),d=(0,o.Fl)((()=>"string"===typeof t.to&&t.to.startsWith("http")));return{isExternalLink:d,href:a,navigate:s,isActive:n,route:e,isExactActive:r}}},d=a(3744);const l=(0,d.Z)(s,[["render",r]]);var i=l},52:function(t,e,a){a.r(e),a.d(e,{default:function(){return Q}});var o=a(6252),n=a(3577),r=a(9963);const c={class:"flex overflow-hidden flex-col pb-4 space-y-4 bg-gray-50 rounded-md"},s=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147\n          2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1\n          0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"})],-1),d=(0,o.Uk)(" 回上一頁 "),l={class:"flex justify-between p-4"},i=["src","alt"],u={class:"flex-1 p-4 space-y-8"},p={class:"flex gap-4 items-center"},g={class:"mb-2 text-xl font-bold"},h={class:"py-1 px-2 ml-2 text-sm text-white bg-primary-400 rounded"},f={class:"flex gap-1 items-center"},m={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6 h-6 text-warning-500",viewBox:"0 0 16 16"},v=(0,o._)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173\n                    6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927\n                    0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83\n                    4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),w=[v],x={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6 h-6 text-gray-400",viewBox:"0 0 16 16"},k=(0,o._)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389\n                    2.256c.386.198.824-.149.746-.592l-.83-4.73\n                    3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513\n                    0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523\n                    3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0\n                    0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8\n                    2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565\n                    0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1),y=[k],$={class:"space-y-4"},_={class:"pl-1 text-gray-400 line-through"},b=(0,o.Uk)(" 個 / 元 "),L={class:"flex flex-col gap-4 justify-between"},C=(0,o._)("option",{value:"0",selected:"",disabled:""},"請選擇訂購數量",-1),P=["value"],D=["disabled"],z=["disabled"],A=(0,o._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),q=(0,o._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962\n                    7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),H=[A,q],U=(0,o.Uk)(" 加入購物車 "),j={class:"flex overflow-x-auto gap-4"},G=["src","alt"];function S(t,e,a,v,k,A){const q=(0,o.up)("AppLink");return(0,o.wg)(),(0,o.iD)("section",c,[(0,o.Wm)(q,{to:"/product",class:"text-secondary-700 flex items-center p-3 gap-3"},{default:(0,o.w5)((()=>[s,d])),_:1}),(0,o._)("div",l,[(0,o._)("img",{class:"max-h-[300px]",src:v.products.imageUrl,alt:v.products.title},null,8,i),(0,o._)("div",u,[(0,o._)("div",p,[(0,o._)("h2",g,[(0,o.Uk)((0,n.zw)(v.products.title)+" ",1),(0,o._)("span",h,(0,n.zw)(v.products.category),1)]),(0,o._)("ul",f,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,((t,e)=>(0,o._)("li",{key:t+new Date},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",m,w,512)),[[r.F8,v.products.rating>e]]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",x,y,512)),[[r.F8,v.products.rating<=e]])]))),64))])]),(0,o._)("ul",$,[(0,o._)("li",null,"商品描述："+(0,n.zw)(v.products.description),1),(0,o._)("li",null,"商品內容："+(0,n.zw)(v.products.content),1),(0,o._)("li",null,[(0,o.Uk)((0,n.zw)(v.products.price)+" ",1),(0,o._)("span",_,(0,n.zw)(v.products.origin_price),1),b]),(0,o._)("li",L,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>v.qty=t),class:"w-1/2"},[C,((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(20,(t=>(0,o._)("option",{value:t,key:t+v.products.id},(0,n.zw)(t),9,P))),64))],512),[[r.bM,v.qty]]),(0,o._)("button",{class:(0,n.C_)(["flex justify-center items-center py-3 w-full rounded border border-danger-700 transition duration-300",0===v.qty?"bg-danger-700 text-gray-50 opacity-40 cursor-not-allowed":"bg-danger-500 text-gray-50 hover:bg-danger-700"]),onClick:e[1]||(e[1]=t=>v.handleUpdateCart(v.products.id,v.qty)),disabled:0===v.qty},[((0,o.wg)(),(0,o.iD)("svg",{class:(0,n.C_)(["mr-3 -ml-1 w-5 h-5 text-danger-50 animate-spin",v.isLoading===v.products.id?"":"hidden"]),disabled:v.isLoading===v.products.id,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},H,10,z)),U],10,D)])])])]),(0,o._)("div",j,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.products.imagesUrl,(t=>((0,o.wg)(),(0,o.iD)("img",{key:t,class:"object-cover flex-auto w-1/12 max-h-48",src:t,alt:v.products.title},null,8,G)))),128))])])}var E=a(2262),F=a(2119),I=a(1219),T=a(7944),Z={components:{AppLink:T.Z},setup(){const{productStore:t,cartStore:e}=(0,I.Z)(),{handleAddCart:a}=e,{productList:n,handleGetProductDetail:r}=t,c=(0,F.yj)(),s=(0,E.iH)(0);function d(t,e){a(t,e)}return(0,o.bv)((()=>{r(c.params.id)})),(0,o.m0)((()=>{void 0!==c.params.id&&r(c.params.id)})),{qty:s,products:(0,o.Fl)((()=>n.productDetail)),handleAddCart:a,isLoading:(0,o.Fl)((()=>e.isLoading)),handleUpdateCart:d}}},B=a(3744);const M=(0,B.Z)(Z,[["render",S]]);var Q=M}}]);
//# sourceMappingURL=52.3078214f.js.map