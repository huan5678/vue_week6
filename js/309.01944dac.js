"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[309],{1219:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(6252),o=a(2262),r=a(8262),c=a(9669),s=a.n(c);const d=(0,r.Q_)("admin",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a=(0,o.iH)(""),r=(0,o.iH)(""),c=(0,o.iH)(!1);function d(){s().defaults.headers.common.Authorization=a.value,e.post(`${t}api/user/check`).then((e=>(c.value=e.data.success,e.data.success))).catch((e=>(console.dir(e),c.value=e.response.data.success,e.response.data.success)))}function i(){const e=document.cookie.split("; backendToken="),t=e.shift().split(";");return t.forEach((e=>{e.trim().startsWith("backendToken=")&&(a.value=e.trim().split("=")["1"])})),e}function u(e){a.value=e.token,r.value=e.expired,c.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function l(){c.value=!1,a.value="",r.value="",e.post(`${t}api/user/logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:r,isLoggedIn:c,handleSetLogin:u,handleSetLogout:l,handleCheckUser:d,handleGetToken:i,handleClearToken:p}}));const i=(0,r.Q_)("adminProduct",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,o.qj)({products:[],pagination:{},currentPage:1,category:null,tempProduct:{}}),c=(0,o.qj)({selected:""});function s(e,t){c.selected=e,r.tempProduct=t}const i=d();function u(){e.get(`${t}api/${a}/admin/products/all`,{token:i.token}).then((e=>{r.products=e.data.products})).catch((e=>{console.dir(e)}))}function l(n=r.currentPage,o=r.category){let c=o;null===o&&(c=""),e.get(`${t}api/${a}/admin/products?page=${n}${c}`,{token:i.token}).then((e=>{r.products=e.data.products,r.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function p(n,o){e.put(`${t}api/${a}/admin/product/${n}`,o,{token:i.token}).then((()=>{l()})).catch((e=>{console.dir(e)}))}function h(n){e.delete(`${t}api/${a}/admin/product/${n}`,{token:i.token}).then((()=>{l()})).catch((e=>{console.dir(e)}))}function g(n){e.post(`${t}api/${a}/admin/product`,n,{token:i.token}).then((()=>{l(r.currentPage)})).catch((e=>{console.dir(e)}))}function f(n){const o=new FormData;return o.append("file-to-upload",n),e.post(`${t}api/${a}/admin/upload`,o,{token:i.token})}return{productList:r,functionSelected:c,handleCreateProduct:g,handleGetProductAll:u,handleGetProductList:l,handleEditProduct:p,handleDeleteProduct:h,handleImageUpload:f,handleSelectFunction:s}}));const u=(0,r.Q_)("product",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,o.qj)({products:[],pagination:{},currentPage:1,productDetail:{}}),c=(0,o.iH)(""),s=(0,o.iH)([]);function d(){e.get(`${t}api/${a}/products/all`).then((e=>{r.products=e.data.products,e.data.products.forEach((e=>{s.value.includes(e.category)||s.value.push(e.category)}))})).catch((e=>{console.dir(e)}))}function i(n="",o=r.currentPage){let c=n;"all"===n&&(c=""),console.log(c),e.get(`${t}api/${a}/products?page=${o}&category=${c}`).then((e=>{r.products=e.data.products,r.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function u(n){c.value=n,e(`${t}api/${a}/product/${n}`).then((e=>{c.value="",r.productDetail=e.data.product})).catch((e=>{console.dir(e),c.value=""}))}return{productList:r,handleGetProductAll:d,handleGetProductList:i,productCategory:s,handleGetProductDetail:u,isLoading:c}}));const l=(0,r.Q_)("cart",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,o.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0}),c=(0,o.iH)("");function s(){e.get(`${t}api/${a}/cart`).then((e=>{r.list=e.data.data.carts,r.totalPrice=e.data.data.total,r.finalPrice=e.data.data.final_total})).catch((e=>{console.dir(e)}))}function d(n,o=1){c.value=n,e.post(`${t}api/${a}/cart`,{data:{product_id:n,qty:o}}).then((e=>{r.data=e.data.data,r.message=e.data.message,c.value="",s()})).catch((e=>{console.dir(e),c.value=""}))}function i(n){c.value=n,e.delete(`${t}api/${a}/cart/${n}`).then((e=>{r.message=e.data.message,c.value="",s()})).catch((e=>{console.dir(e),c.value=""}))}function u(n,o){c.value=n,e.put(`${t}api/${a}/cart/${n}`,{data:{data:{product_id:n,qty:o}}}).then((e=>{r.message=e.data.message,c.value="",s()})).catch((e=>{console.dir(e),c.value=""}))}function l(){e.delete(`${t}api/${a}/carts`).then((e=>{r.message=e.data.message,s()})).catch((e=>{console.dir(e)}))}return{cartData:r,isLoading:c,handleAddCart:d,handleGetCart:s,handleDeleteCart:i,handleUpdateCart:u,handleClearCart:l}}));const p=(0,r.Q_)("order",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",{handleGetCart:r}=l(),c=(0,o.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),s=(0,o.qj)({success:!1,orders:[],pagination:{},message:[]});function d(n){e.post(`${t}api/${a}/order`,{data:{user:{name:n.name,email:n.email,tel:n.tel,address:n.address},message:n.message}}).then((e=>{c.success=e.data.success,c.message=e.data.message,c.total=e.data.total,c.create_at=e.data.create_at,c.orderId=e.data.orderId,r()})).catch((e=>{console.dir(e)}))}function i(){e.get(`${t}api/${a}/orders`).then((e=>{s.success=e.data.success,s.orders=e.data.orders,s.pagination=e.data.pagination,s.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:c,orderList:s,handleSendOrder:d,handleGetOrderList:i}}));function h(){const e=d(),t=i(),a=u(),n=p(),o=l();return{adminStore:e,adminProductStore:t,productStore:a,orderStore:n,cartStore:o}}},7944:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(6252);const o=["href"];function r(e,t,a,r,c,s){const d=(0,n.up)("router-link");return r.isExternalLink?((0,n.wg)(),(0,n.iD)("a",(0,n.dG)({key:0},e.$attrs,{rel:"noopener",href:e.to,target:"_blank"}),[(0,n.WI)(e.$slots,"default")],16,o)):((0,n.wg)(),(0,n.j4)(d,(0,n.dG)({key:1},e.$props,{class:["py-2 px-3 font-medium text-gray-500 border-b-2 border-transparent transition duration-300 ease-in-out",r.isActive?"border-primary-300 focus:border-primary-700 hover:border-primary-700 text-gray-900":"text-gray-300 hover:border-gray-300 hover:text-gray-700 focus:border-gray-300\n        focus:text-gray-700"]}),{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"default")])),_:3},16,["class"]))}var c=a(2119),s={props:{...c.rH.props},setup(e){const{route:t,href:a,isActive:o,isExactActive:r,navigate:s}=(0,c.nB)(e),d=(0,n.Fl)((()=>"string"===typeof e.to&&e.to.startsWith("http")));return{isExternalLink:d,href:a,navigate:s,isActive:o,route:t,isExactActive:r}}},d=a(3744);const i=(0,d.Z)(s,[["render",r]]);var u=i},4263:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(6252);const o={class:"container flex justify-between p-3"},r=(0,n.Uk)(" LOGO "),c={key:0,class:"flex gap-4 justify-between items-center"},s=(0,n.Uk)(" 產品列表 "),d=(0,n.Uk)(" 後台管理 ");function i(e,t,a,i,u,l){const p=(0,n.up)("AppLink");return(0,n.wg)(),(0,n.iD)("nav",o,[(0,n._)("h2",null,[(0,n.Wm)(p,{to:"/"},{default:(0,n.w5)((()=>[r])),_:1})]),"product-detail"!==i.route.name?((0,n.wg)(),(0,n.iD)("ul",c,[(0,n._)("li",null,[(0,n.Wm)(p,{to:"product"},{default:(0,n.w5)((()=>[s])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(p,{to:"admin"},{default:(0,n.w5)((()=>[d])),_:1})])])):(0,n.kq)("",!0)])}var u=a(2119),l=a(7944),p={components:{AppLink:l.Z},setup(){const e=(0,u.yj)();return{route:e}}},h=a(3744);const g=(0,h.Z)(p,[["render",i]]);var f=g},9309:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(6252),o=a(9963);function r(e,t,a,r,c,s){const d=(0,n.up)("TheHeader"),i=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d),(0,n.Wm)(i,null,{default:(0,n.w5)((({Component:e})=>[(0,n.Wm)(o.uT,{name:"fade"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:2},1024)])),_:1})],64)}var c=a(4263),s=a(1219),d=a(2119),i={name:"BackEndView",components:{TheHeader:c.Z},setup(){const{adminStore:e}=(0,s.Z)(),{handleCheckUser:t,handleGetToken:a}=e,o=(0,d.tv)();(0,n.wF)((()=>{a(),t();const e=a();""===e[0]&&o.push("/login")}))}},u=a(3744);const l=(0,u.Z)(i,[["render",r]]);var p=l}}]);
//# sourceMappingURL=309.01944dac.js.map