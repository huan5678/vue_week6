"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[885],{1219:function(e,t,a){a.d(t,{Z:function(){return g}});var o=a(6252),l=a(2262),n=a(8262),r=a(9669),d=a.n(r);const c=(0,n.Q_)("admin",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a=(0,l.iH)(""),n=(0,l.iH)(""),r=(0,l.iH)(!1);function c(){d().defaults.headers.common.Authorization=a.value,e.post(`${t}api/user/check`).then((e=>(r.value=e.data.success,e.data.success))).catch((e=>(console.dir(e),r.value=e.response.data.success,e.response.data.success)))}function s(){const e=document.cookie.split("; backendToken="),t=e.shift().split(";");return t.forEach((e=>{e.trim().startsWith("backendToken=")&&(a.value=e.trim().split("=")["1"])})),e}function i(e){a.value=e.token,n.value=e.expired,r.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function u(){r.value=!1,a.value="",n.value="",e.post(`${t}api/user/logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:n,isLoggedIn:r,handleSetLogin:i,handleSetLogout:u,handleCheckUser:c,handleGetToken:s,handleClearToken:p}}));const s=(0,n.Q_)("adminProduct",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",n=(0,l.qj)({products:[],pagination:{},currentPage:1,category:null,tempProduct:{}}),r=(0,l.qj)({selected:""});function d(e,t){r.selected=e,n.tempProduct=t}const s=c();function i(){e.get(`${t}api/${a}/admin/products/all`,{token:s.token}).then((e=>{n.products=e.data.products})).catch((e=>{console.dir(e)}))}function u(o=n.currentPage,l=n.category){let r=l;null===l&&(r=""),e.get(`${t}api/${a}/admin/products?page=${o}${r}`,{token:s.token}).then((e=>{n.products=e.data.products,n.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function p(o,l){e.put(`${t}api/${a}/admin/product/${o}`,l,{token:s.token}).then((()=>{u()})).catch((e=>{console.dir(e)}))}function g(o){e.delete(`${t}api/${a}/admin/product/${o}`,{token:s.token}).then((()=>{u()})).catch((e=>{console.dir(e)}))}function h(o){e.post(`${t}api/${a}/admin/product`,o,{token:s.token}).then((()=>{u(n.currentPage)})).catch((e=>{console.dir(e)}))}function m(o){const l=new FormData;return l.append("file-to-upload",o),e.post(`${t}api/${a}/admin/upload`,l,{token:s.token})}return{productList:n,functionSelected:r,handleCreateProduct:h,handleGetProductAll:i,handleGetProductList:u,handleEditProduct:p,handleDeleteProduct:g,handleImageUpload:m,handleSelectFunction:d}}));const i=(0,n.Q_)("product",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",n=(0,l.qj)({products:[],pagination:{},currentPage:1,productDetail:{}}),r=(0,l.iH)(""),d=(0,l.iH)([]);function c(){e.get(`${t}api/${a}/products/all`).then((e=>{n.products=e.data.products,e.data.products.forEach((e=>{d.value.includes(e.category)||d.value.push(e.category)}))})).catch((e=>{console.dir(e)}))}function s(o="",l=n.currentPage){let r=o;"all"===o&&(r=""),console.log(r),e.get(`${t}api/${a}/products?page=${l}&category=${r}`).then((e=>{n.products=e.data.products,n.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function i(o){r.value=o,e(`${t}api/${a}/product/${o}`).then((e=>{r.value="",n.productDetail=e.data.product})).catch((e=>{console.dir(e),r.value=""}))}return{productList:n,handleGetProductAll:c,handleGetProductList:s,productCategory:d,handleGetProductDetail:i,isLoading:r}}));const u=(0,n.Q_)("cart",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",n=(0,l.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0}),r=(0,l.iH)("");function d(){e.get(`${t}api/${a}/cart`).then((e=>{n.list=e.data.data.carts,n.totalPrice=e.data.data.total,n.finalPrice=e.data.data.final_total})).catch((e=>{console.dir(e)}))}function c(o,l=1){r.value=o,e.post(`${t}api/${a}/cart`,{data:{product_id:o,qty:l}}).then((e=>{n.data=e.data.data,n.message=e.data.message,r.value="",d()})).catch((e=>{console.dir(e),r.value=""}))}function s(o){r.value=o,e.delete(`${t}api/${a}/cart/${o}`).then((e=>{n.message=e.data.message,r.value="",d()})).catch((e=>{console.dir(e),r.value=""}))}function i(o,l){r.value=o,e.put(`${t}api/${a}/cart/${o}`,{data:{data:{product_id:o,qty:l}}}).then((e=>{n.message=e.data.message,r.value="",d()})).catch((e=>{console.dir(e),r.value=""}))}function u(){e.delete(`${t}api/${a}/carts`).then((e=>{n.message=e.data.message,d()})).catch((e=>{console.dir(e)}))}return{cartData:n,isLoading:r,handleAddCart:c,handleGetCart:d,handleDeleteCart:s,handleUpdateCart:i,handleClearCart:u}}));const p=(0,n.Q_)("order",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",{handleGetCart:n}=u(),r=(0,l.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),d=(0,l.qj)({success:!1,orders:[],pagination:{},message:[]});function c(o){e.post(`${t}api/${a}/order`,{data:{user:{name:o.name,email:o.email,tel:o.tel,address:o.address},message:o.message}}).then((e=>{r.success=e.data.success,r.message=e.data.message,r.total=e.data.total,r.create_at=e.data.create_at,r.orderId=e.data.orderId,n()})).catch((e=>{console.dir(e)}))}function s(){e.get(`${t}api/${a}/orders`).then((e=>{d.success=e.data.success,d.orders=e.data.orders,d.pagination=e.data.pagination,d.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:r,orderList:d,handleSendOrder:c,handleGetOrderList:s}}));function g(){const e=c(),t=s(),a=i(),o=p(),l=u();return{adminStore:e,adminProductStore:t,productStore:a,orderStore:o,cartStore:l}}},1885:function(e,t,a){a.r(t),a.d(t,{default:function(){return Lt}});var o=a(6252);const l={class:"bg-gray-100"},n={class:"container"};function r(e,t,a,r,d,c){const s=(0,o.up)("ProductsTable"),i=(0,o.up)("ModalCardDelete"),u=(0,o.up)("ModalCardDetail"),p=(0,o.up)("ModalCardAddition"),g=(0,o.up)("vue-final-modal");return(0,o.wg)(),(0,o.iD)("main",l,[(0,o._)("div",n,[(0,o.Wm)(s,{handleOpenModal:r.handleOpenModal},null,8,["handleOpenModal"]),(0,o.Wm)(g,{modelValue:r.isOpenModal,"onUpdate:modelValue":t[0]||(t[0]=e=>r.isOpenModal=e),id:"adminModal",classes:"flex justify-center items-center bg-opacity-50 backdrop-blur-[2px]","content-class":"bg-gray-50 rounded-md shadow-md overflow-hidden","focus-trap":""},{default:(0,o.w5)((()=>["productDelete"===r.modalState?((0,o.wg)(),(0,o.j4)(i,{key:0,handleOpenModal:r.handleOpenModal},null,8,["handleOpenModal"])):(0,o.kq)("",!0),"getDetail"===r.modalState?((0,o.wg)(),(0,o.j4)(u,{key:1,handleOpenModal:r.handleOpenModal},null,8,["handleOpenModal"])):(0,o.kq)("",!0),"productEdit"===r.modalState||"productCreate"===r.modalState?((0,o.wg)(),(0,o.j4)(p,{key:2,handleOpenModal:r.handleOpenModal},null,8,["handleOpenModal"])):(0,o.kq)("",!0)])),_:1},8,["modelValue"])])])}var d=a(2262),c=a(2119),s=a(1421),i=a(1219),u=a(3577);const p={class:"overflow-auto p-2 space-y-4"},g={class:"flex gap-4 justify-end items-center p-6"},h=(0,o._)("h2",{class:"text-4xl font-medium"},"產品列表",-1),m=(0,o._)("h2",{class:"ml-auto text-xl"},"管理者登出",-1),w={class:"mb-4 bg-gray-50 rounded table-auto"},f=(0,o._)("thead",{class:"bg-gray-800"},[(0,o._)("tr",{class:"text-white"},[(0,o._)("td",{width:"200",class:"p-4 text-lg whitespace-nowrap"},"產品名稱"),(0,o._)("td",{width:"250",class:"p-4 text-lg text-right whitespace-nowrap"},"原價"),(0,o._)("td",{width:"250",class:"p-4 text-lg text-right whitespace-nowrap"},"售價"),(0,o._)("td",{width:"250",class:"p-4 text-lg text-center whitespace-nowrap"},"是否啟用"),(0,o._)("td",{width:"200",class:"p-4 text-lg text-center whitespace-nowrap"},"查看細節"),(0,o._)("td",{colspan:"2",width:"400",class:"p-4 text-lg text-center whitespace-nowrap"},"功能")])],-1),b={class:"py-2 px-4 whitespace-nowrap"},v={class:"py-2 px-4 text-right whitespace-nowrap"},x={class:"py-2 px-4 text-right whitespace-nowrap"},y={key:0,class:"py-2 px-4 text-center text-primary-400 whitespace-nowrap"},_={key:1,class:"py-2 px-4 text-center text-gray-400 whitespace-nowrap"},k={key:2,class:"py-2 px-4 text-center text-warning-600 whitespace-nowrap"},D={key:3,class:"py-2 px-4 text-center text-danger-700 whitespace-nowrap"},M={class:"py-2 px-4 text-center whitespace-nowrap"},P=["onClick"],C={class:"py-2 px-4 text-center whitespace-nowrap"},L=["onClick"],$={class:"py-2 px-4 text-center whitespace-nowrap"},U=["onClick"],O={class:"flex justify-between items-center"},S={class:"flex gap-2 justify-center items-center"},j={class:""},z=["disabled"],I=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1\n                0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"})],-1),q=[I],T=["onClick"],H={class:""},G=["disabled"],F=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0\n                .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"})],-1),A=[F];function E(e,t,a,l,n,r){return(0,o.wg)(),(0,o.iD)("section",p,[(0,o._)("div",g,[h,m,(0,o._)("button",{class:"py-2 px-6 text-white bg-danger-500 hover:bg-danger-600 rounded hover:shadow hover:shadow-danger-400 transition duration-300",onClick:t[0]||(t[0]=e=>l.handleIsLogout())}," 登出 ")]),(0,o._)("table",w,[f,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productList.products,(e=>((0,o.wg)(),(0,o.iD)("tr",{class:"hover:bg-gray-200 border-b border-gray-300",key:e.id},[(0,o._)("td",b,(0,u.zw)(e.title),1),(0,o._)("td",v,(0,u.zw)(e.origin_price),1),(0,o._)("td",x,(0,u.zw)(e.price),1),1==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",y," 啟用 ")):0==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",_," 未啟用 ")):2==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",k," 未上架 ")):(0,o.kq)("",!0),3==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",D," 已下架 ")):(0,o.kq)("",!0),(0,o._)("td",M,[(0,o._)("button",{type:"button",class:"py-2 px-4 text-white bg-primary-500 hover:bg-primary-600 rounded hover:shadow hover:shadow-primary-400 transition duration-200",onClick:t=>l.openModal("getDetail",e)}," 查看細節 ",8,P)]),(0,o._)("td",C,[(0,o._)("button",{type:"button",class:"py-2 px-4 text-white bg-secondary-700 rounded hover:bg-secondary-800 hover:shadow hover:shadow-secondary-400 transition duration-200",onClick:t=>l.openModal("productEdit",e)}," 修改內容 ",8,L)]),(0,o._)("td",$,[(0,o._)("button",{type:"button",class:"py-2 px-4 text-white bg-danger-500 hover:bg-danger-600 rounded hover:shadow hover:shadow-danger-400 transition duration-200",onClick:t=>l.openModal("productDelete",e)}," 刪除品項 ",8,U)])])))),128))])]),(0,o._)("div",O,[(0,o._)("p",null,"目前有"+(0,u.zw)(l.productList.products.length)+"項產品",1),(0,o._)("button",{type:"button",class:"py-2 px-4 text-white bg-warning-500 hover:bg-warning-600 rounded hover:shadow hover:shadow-warning-400 transition duration-200",onClick:t[1]||(t[1]=e=>l.openModal("productCreate",l.tempProduct))}," 新增品項 ")]),(0,o._)("div",null,[(0,o._)("ul",S,[(0,o._)("li",j,[(0,o._)("button",{type:"button",class:"p-2 text-primary-500 disabled:text-gray-500 rounded border border-primary-500 disabled:border-gray-400",disabled:!l.productList.pagination.has_pre,onClick:t[2]||(t[2]=e=>l.handleGetProductList(l.productList.pagination.current_page-1))},q,8,z)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productList.pagination.total_pages,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e+new Date},[(0,o._)("button",{type:"button",class:(0,u.C_)(["py-[6px] px-3 rounded border-primary-500",{"bg-primary-700 text-white":e===l.productList.pagination.current_page}]),onClick:t=>l.handleGetProductList(e)},(0,u.zw)(e),11,T)])))),128)),(0,o._)("li",H,[(0,o._)("button",{type:"button",class:"p-2 text-primary-500 disabled:text-gray-500 rounded border border-primary-500 disabled:border-gray-400",disabled:!l.productList.pagination.has_next,onClick:t[3]||(t[3]=e=>l.handleGetProductList(l.productList.pagination.current_page+1))},A,8,G)])])])])}var V={setup(e,t){const{adminStore:a,adminProductStore:l}=(0,i.Z)(),{handleSetLogout:n,handleClearToken:r}=a,{productList:s,handleGetProductList:u,functionSelected:p,handleSelectFunction:g}=l,h=(0,c.tv)(),m=(0,d.iH)({title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]});function w(){r(),n(),h.push("/")}function f(e,a){t.attrs.handleOpenModal(!0),g(e,a)}return(0,o.bv)((()=>{u(),console.log(t.attrs)})),{productList:(0,o.Fl)((()=>s)),tempProduct:m,handleIsLogout:w,handleGetProductList:u,functionSelected:(0,o.Fl)((()=>p)),openModal:f}}},Z=a(3744);const R=(0,Z.Z)(V,[["render",E]]);var B=R,K=a(9963);const W={class:"flex overflow-hidden flex-col pb-4 space-y-4 bg-gray-50 rounded-md"},Y={class:"flex justify-between p-4"},Q=["src","alt"],N={class:"flex-1 p-4 space-y-8"},J={class:"flex gap-4 items-center"},X={class:"mb-2 text-xl font-bold"},ee={class:"py-1 px-2 ml-2 text-sm text-white bg-primary-400 rounded"},te={class:"flex gap-1 items-center"},ae={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6 h-6 text-warning-500",viewBox:"0 0 16 16"},oe=(0,o._)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173\n                  6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927\n                  0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83\n                  4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),le=[oe],ne={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6 h-6 text-gray-400",viewBox:"0 0 16 16"},re=(0,o._)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389\n                  2.256c.386.198.824-.149.746-.592l-.83-4.73\n                  3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513\n                  0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523\n                  3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0\n                  0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847\n                  3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694\n                  3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1),de=[re],ce={class:"space-y-4"},se={class:"pl-1 text-gray-400 line-through"},ie=(0,o.Uk)(" 個 / 元 "),ue={class:"flex overflow-x-auto gap-4"},pe=["src","alt"];function ge(e,t,a,l,n,r){const d=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",W,[(0,o.Wm)(d,{title:"產品詳細內容","close-modal":l.handleOpenModal},null,8,["close-modal"]),(0,o._)("div",Y,[(0,o._)("img",{class:"max-h-[300px]",src:l.targetProduct.imageUrl,alt:l.targetProduct.title},null,8,Q),(0,o._)("div",N,[(0,o._)("div",J,[(0,o._)("h2",X,[(0,o.Uk)((0,u.zw)(l.targetProduct.title)+" ",1),(0,o._)("span",ee,(0,u.zw)(l.targetProduct.category),1)]),(0,o._)("ul",te,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,((e,t)=>(0,o._)("li",{key:e+new Date},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",ae,le,512)),[[K.F8,l.targetProduct.rating>t]]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",ne,de,512)),[[K.F8,l.targetProduct.rating<=t]])]))),64))])]),(0,o._)("ul",ce,[(0,o._)("li",null,"商品描述："+(0,u.zw)(l.targetProduct.description),1),(0,o._)("li",null,"商品內容："+(0,u.zw)(l.targetProduct.content),1),(0,o._)("li",null,[(0,o.Uk)((0,u.zw)(l.targetProduct.price)+" ",1),(0,o._)("span",se,(0,u.zw)(l.targetProduct.origin_price),1),ie])])])]),(0,o._)("div",ue,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.targetProduct.imagesUrl,(e=>((0,o.wg)(),(0,o.iD)("img",{key:e,class:"object-cover flex-auto w-1/12 max-h-48",src:e,alt:e},null,8,pe)))),128))])])}const he={class:"flex justify-between items-center space-y-3 bg-gray-900"},me={class:"p-4 text-lg text-white"},we=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707\n          8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0\n          1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),fe=[we];function be(e,t,a,l,n,r){return(0,o.wg)(),(0,o.iD)("div",he,[(0,o._)("h2",me,(0,u.zw)(l.title),1),(0,o._)("button",{type:"button",class:"p-4 text-gray-50 hover:text-gray-100 transition-all duration-200 ease-in-out hover:scale-125",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))},fe)])}var ve={setup(e,t){console.log(t.attrs);const{title:a}=t.attrs;function o(){t.attrs["close-modal"](!1)}return{title:a,closeModal:o}}};const xe=(0,Z.Z)(ve,[["render",be]]);var ye=xe,_e={components:{ModalCardTitle:ye},setup(e,t){const{adminProductStore:a}=(0,i.Z)();return{targetProduct:(0,o.Fl)((()=>a.productList.tempProduct)),handleOpenModal:t.attrs.handleOpenModal}}};const ke=(0,Z.Z)(_e,[["render",ge]]);var De=ke;const Me={class:"overflow-hidden space-y-4 bg-gray-50 rounded-md"},Pe={class:"p-2 text-xl text-center text-secondary-500"},Ce={class:"container flex gap-4 justify-between p-4"};function Le(e,t,a,l,n,r){const d=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",Me,[(0,o.Wm)(d,{title:"請確認是否刪除","close-modal":l.handleOpenModal},null,8,["close-modal"]),(0,o._)("p",Pe,(0,u.zw)(l.productData.title),1),(0,o._)("div",Ce,[(0,o._)("button",{class:"flex-auto p-2 text-white bg-danger-500 hover:bg-danger-600 rounded-md hover:shadow hover:shadow-danger-500 transition duration-300",type:"button",onClick:t[0]||(t[0]=e=>l.handleSetDeleteProduct(l.productData.id))}," 確認刪除 "),(0,o._)("button",{class:"flex-auto p-2 text-white bg-gray-500 hover:bg-gray-600 rounded-md hover:shadow hover:shadow-gray-500 transition duration-300",onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e)),type:"button"}," 取消刪除 ")])])}var $e={components:{ModalCardTitle:ye},setup(e,t){const{adminProductStore:a}=(0,i.Z)(),{handleDeleteProduct:l}=a,n=(0,d.iH)({...a.productList.tempProduct});function r(){t.attrs.handleOpenModal(!1)}function c(e){l(e),r()}return(0,o.m0)((()=>{n.value={...a.productList.tempProduct}})),{productData:n,handleSetDeleteProduct:c,handleOpenModal:t.attrs.handleOpenModal,closeModal:r}}};const Ue=(0,Z.Z)($e,[["render",Le]]);var Oe=Ue;const Se={class:"flex overflow-hidden flex-col pb-4 space-y-4 bg-gray-50 rounded-md"},je={class:"flex gap-4 justify-between"},ze={class:"flex-auto"},Ie=(0,o._)("label",{for:"productName",class:"block mb-4"},"產品名稱",-1),qe={class:"flex-auto"},Te=(0,o._)("label",{for:"productContent",class:"block mb-4"},"產品說明",-1),He={class:"flex-auto"},Ge=(0,o._)("label",{for:"productCategory",class:"block mb-4"},"產品類別",-1),Fe=(0,o.uE)('<option value="測試分類">測試分類</option><option value="上衣類">上衣類</option><option value="褲類">褲類</option><option value="裙類">裙類</option><option value="鞋類">鞋類</option>',5),Ae=[Fe],Ee={class:"flex-auto"},Ve=(0,o._)("label",{for:"productRating",class:"block mb-4"},"產品星級",-1),Ze=["value"],Re={class:"flex gap-4 justify-between"},Be={class:"flex-auto"},Ke={class:"flex gap-2 justify-between"},We={class:"flex-1"},Ye=(0,o._)("label",{for:"productMainImage",class:"block mb-4"},"產品主圖片",-1),Qe=["src"],Ne=(0,o._)("label",{for:"productImages",class:"block mb-4"},"產品附屬圖片",-1),Je={class:"flex gap-2 justify-between"},Xe={class:"relative"},et=["src"],tt=["onClick"],at=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,o._)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1),ot=[at],lt={class:""},nt=(0,o._)("label",{for:"productDescription",class:"block mb-4"},"產品描述",-1),rt={class:"flex gap-4 justify-between"},dt={class:"flex-auto"},ct=(0,o._)("label",{for:"productIsEnable",class:"block mb-4"},"產品啟用狀態",-1),st=(0,o._)("option",{value:"0"},"未啟用",-1),it=(0,o._)("option",{value:"1"},"啟用",-1),ut=(0,o._)("option",{value:"2"},"未上架",-1),pt=(0,o._)("option",{value:"3"},"已下架",-1),gt=[st,it,ut,pt],ht={class:"flex-auto"},mt=(0,o._)("label",{for:"productOriginPrice",class:"block mb-4"},"產品原價",-1),wt={class:"flex-auto"},ft=(0,o._)("label",{for:"productPrice",class:"block mb-4"},"產品最終價格",-1),bt={class:"flex-auto"},vt=(0,o._)("label",{for:"productUnit",class:"block mb-4"},"產品品項單位",-1),xt={class:"flex gap-4 justify-between"},yt={class:"flex-auto py-2 text-white bg-success-500 rounded-md hover:bg-success-600 hover:shadow hover:shadow-success-400 transition duration-300",type:"submit"};function _t(e,t,a,l,n,r){const d=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",Se,[(0,o.Wm)(d,{title:"productEdit"===l.selectType?"內容編輯":"新增產品","close-modal":l.handleOpenModal},null,8,["title","close-modal"]),(0,o._)("form",{class:"container p-4 space-y-4",onSubmit:t[12]||(t[12]=(0,K.iM)(((...e)=>l.handleProductAddition&&l.handleProductAddition(...e)),["prevent"]))},[(0,o._)("div",je,[(0,o._)("div",ze,[Ie,(0,o.wy)((0,o._)("input",{type:"text",id:"productName",name:"productName",class:"w-full rounded","onUpdate:modelValue":t[0]||(t[0]=e=>l.productData.title=e),required:""},null,512),[[K.nr,l.productData.title]])]),(0,o._)("div",qe,[Te,(0,o.wy)((0,o._)("input",{type:"text",id:"productContent",name:"productContent",class:"w-full rounded","onUpdate:modelValue":t[1]||(t[1]=e=>l.productData.content=e),required:""},null,512),[[K.nr,l.productData.content]])]),(0,o._)("div",He,[Ge,(0,o.wy)((0,o._)("select",{class:"w-full rounded",id:"productCategory",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>l.productData.category=e)},Ae,512),[[K.bM,l.productData.category]])]),(0,o._)("div",Ee,[Ve,(0,o.wy)((0,o._)("select",{class:"w-full rounded",id:"productRating",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>l.productData.rating=e)},[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,(e=>(0,o._)("option",{value:e,key:e+new Date},(0,u.zw)(e)+"星",9,Ze))),64))],512),[[K.bM,l.productData.rating]])])]),(0,o._)("div",Re,[(0,o._)("div",Be,[(0,o._)("div",Ke,[(0,o._)("div",We,[Ye,(0,o._)("input",{type:"file",accept:"image/*",id:"productImages",name:"productImages",ref:"imageFile",class:"block file:py-2 file:px-4 file:mr-4 w-full file:text-sm text-gray-400 file:text-secondary-700 file:bg-secondary-100 hover:file:bg-secondary-300 rounded file:rounded-full file:border-0",onChange:t[4]||(t[4]=e=>l.handleGetImageUrl("mainImage"))},null,544)]),l.productData.imageUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"object-cover flex-auto max-h-48",src:l.productData.imageUrl,alt:"產品主圖"},null,8,Qe)):(0,o.kq)("",!0)])])]),(0,o._)("div",null,[Ne,(0,o._)("input",{type:"file",accept:"image/*",id:"productImages",name:"productImages",ref:"imageFile",class:"block file:py-2 file:px-4 file:mr-4 w-full file:text-sm text-gray-400 file:text-secondary-700 file:bg-secondary-100 hover:file:bg-secondary-300 rounded file:rounded-full file:border-0",onChange:t[5]||(t[5]=e=>l.handleGetImageUrl())},null,544)]),(0,o._)("ul",Je,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productData.imagesUrl,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"flex-auto",key:e+t},[(0,o._)("div",Xe,[""!==e?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"object-cover w-max max-h-48 rounded-xl",src:e,alt:"附屬圖片"},null,8,et)):(0,o.kq)("",!0),(0,o._)("button",{class:"absolute top-0 right-0 p-4 text-secondary-100",type:"button",onClick:e=>l.handleRemoveImageArr(t)},ot,8,tt)])])))),128))]),(0,o._)("div",lt,[nt,(0,o.wy)((0,o._)("textarea",{id:"productDescription",name:"productDescription",class:"w-full rounded","onUpdate:modelValue":t[6]||(t[6]=e=>l.productData.description=e)},null,512),[[K.nr,l.productData.description]])]),(0,o._)("div",rt,[(0,o._)("div",dt,[ct,(0,o.wy)((0,o._)("select",{class:"w-full rounded",id:"productIsEnable",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>l.productData.is_enabled=e)},gt,512),[[K.bM,l.productData.is_enabled]])]),(0,o._)("div",ht,[mt,(0,o.wy)((0,o._)("input",{type:"text",id:"productOriginPrice",name:"productOriginPrice",class:"w-full rounded","onUpdate:modelValue":t[8]||(t[8]=e=>l.productData.origin_price=e)},null,512),[[K.nr,l.productData.origin_price,void 0,{number:!0}]])]),(0,o._)("div",wt,[ft,(0,o.wy)((0,o._)("input",{type:"text",id:"productPrice",name:"productPrice",class:"w-full rounded",required:"","onUpdate:modelValue":t[9]||(t[9]=e=>l.productData.price=e)},null,512),[[K.nr,l.productData.price,void 0,{number:!0}]])]),(0,o._)("div",bt,[vt,(0,o.wy)((0,o._)("input",{type:"text",id:"productUnit",name:"productUnit",class:"w-full rounded","onUpdate:modelValue":t[10]||(t[10]=e=>l.productData.unit=e)},null,512),[[K.nr,l.productData.unit]])])]),(0,o._)("div",xt,[(0,o._)("button",yt,(0,u.zw)("productEdit"===l.selectType?"確定修改":"新增產品"),1),(0,o._)("button",{class:"flex-auto py-2 text-white bg-gray-500 hover:bg-gray-600 rounded-md hover:shadow hover:shadow-gray-400 transition duration-300",onClick:t[11]||(t[11]=e=>l.handleResetFormInput()),type:"reset"},(0,u.zw)("productEdit"===l.selectType?"取消修改":"取消新增"),1)])],32)])}var kt={components:{ModalCardTitle:ye},props:{products:Object},setup(e,t){const{adminProductStore:a}=(0,i.Z)(),{handleEditProduct:l,handleCreateProduct:n,handleImageUpload:r,functionSelected:c,productList:s}=a,u=(0,o.Fl)({get:()=>({...s.tempProduct}),set:e=>e}),p=(0,d.iH)(null);function g(){t.attrs.handleOpenModal(!1)}function h(){u.value={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]},g()}function m(){"productEdit"===c.selected?l(u.value.id,u.value):n(u.value),h()}function w(e){const t=p.value.files[0];console.log(p),console.log(t),r(t).then((t=>{"mainImage"===e?u.value.imageUrl=t.data.imageUrl:u.value.imagesUrl.push(t.data.imageUrl),console.log(t.data)})).catch((e=>{console.dir(e)}))}function f(e){u.value.imagesUrl.splice(e,1)}return{selectType:(0,o.Fl)((()=>c.selected)),productData:u,imageFile:p,handleResetFormInput:h,handleProductAddition:m,handleGetImageUrl:w,handleRemoveImageArr:f,handleOpenModal:t.attrs.handleOpenModal,closeModal:g}}};const Dt=(0,Z.Z)(kt,[["render",_t]]);var Mt=Dt,Pt={components:{ProductsTable:B,ModalCardDetail:De,ModalCardDelete:Oe,ModalCardAddition:Mt},setup(){const{adminStore:e,adminProductStore:t}=(0,i.Z)(),{handleCheckUser:a,handleGetToken:l}=e,n=(0,c.tv)(),r=(0,d.iH)(!1);function u(e=!0){r.value=e,s.Vq.show("adminModal")}return(0,o.wF)((()=>{l(),a();const e=l();""===e[0]&&n.push("/login")})),{handleOpenModal:u,isOpenModal:r,modalState:(0,o.Fl)((()=>t.functionSelected.selected))}}};const Ct=(0,Z.Z)(Pt,[["render",r]]);var Lt=Ct}}]);
//# sourceMappingURL=885.81760131.js.map