"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[979],{1219:function(e,t,a){a.d(t,{Z:function(){return h}});var o=a(6252),n=a(2262),r=a(8262),s=a(9669),c=a.n(s);const d=(0,r.Q_)("admin",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a=(0,n.iH)(""),r=(0,n.iH)(""),s=(0,n.iH)(!1);function d(){c().defaults.headers.common.Authorization=a.value,e.post(`${t}api/user/check`).then((e=>(s.value=e.data.success,e.data.success))).catch((e=>(console.dir(e),s.value=e.response.data.success,e.response.data.success)))}function i(){const e=document.cookie.split("; backendToken="),t=e.shift().split(";");return t.forEach((e=>{e.trim().startsWith("backendToken=")&&(a.value=e.trim().split("=")["1"])})),e}function u(e){a.value=e.token,r.value=e.expired,s.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function l(){s.value=!1,a.value="",r.value="",e.post(`${t}api/user/logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:r,isLoggedIn:s,handleSetLogin:u,handleSetLogout:l,handleCheckUser:d,handleGetToken:i,handleClearToken:p}}));const i=(0,r.Q_)("adminProduct",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,n.qj)({products:[],pagination:{},currentPage:1,category:null,tempProduct:{}}),s=(0,n.qj)({selected:""});function c(e,t){s.selected=e,r.tempProduct=t}const i=d();function u(){e.get(`${t}api/${a}/admin/products/all`,{token:i.token}).then((e=>{r.products=e.data.products})).catch((e=>{console.dir(e)}))}function l(o=r.currentPage,n=r.category){let s=n;null===n&&(s=""),e.get(`${t}api/${a}/admin/products?page=${o}${s}`,{token:i.token}).then((e=>{r.products=e.data.products,r.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function p(o,n){e.put(`${t}api/${a}/admin/product/${o}`,n,{token:i.token}).then((()=>{l()})).catch((e=>{console.dir(e)}))}function h(o){e.delete(`${t}api/${a}/admin/product/${o}`,{token:i.token}).then((()=>{l()})).catch((e=>{console.dir(e)}))}function m(o){e.post(`${t}api/${a}/admin/product`,o,{token:i.token}).then((()=>{l(r.currentPage)})).catch((e=>{console.dir(e)}))}function g(o){const n=new FormData;return n.append("file-to-upload",o),e.post(`${t}api/${a}/admin/upload`,n,{token:i.token})}return{productList:r,functionSelected:s,handleCreateProduct:m,handleGetProductAll:u,handleGetProductList:l,handleEditProduct:p,handleDeleteProduct:h,handleImageUpload:g,handleSelectFunction:c}}));const u=(0,r.Q_)("product",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,n.qj)({products:[],pagination:{},currentPage:1,productDetail:{}}),s=(0,n.iH)(""),c=(0,n.iH)([]);function d(){e.get(`${t}api/${a}/products/all`).then((e=>{r.products=e.data.products,e.data.products.forEach((e=>{c.value.includes(e.category)||c.value.push(e.category)}))})).catch((e=>{console.dir(e)}))}function i(o="",n=r.currentPage){let s=o;"all"===o&&(s=""),console.log(s),e.get(`${t}api/${a}/products?page=${n}&category=${s}`).then((e=>{r.products=e.data.products,r.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function u(o){s.value=o,e(`${t}api/${a}/product/${o}`).then((e=>{s.value="",r.productDetail=e.data.product})).catch((e=>{console.dir(e),s.value=""}))}return{productList:r,handleGetProductAll:d,handleGetProductList:i,productCategory:c,handleGetProductDetail:u,isLoading:s}}));const l=(0,r.Q_)("cart",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,n.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0}),s=(0,n.iH)("");function c(){e.get(`${t}api/${a}/cart`).then((e=>{r.list=e.data.data.carts,r.totalPrice=e.data.data.total,r.finalPrice=e.data.data.final_total})).catch((e=>{console.dir(e)}))}function d(o,n=1){s.value=o,e.post(`${t}api/${a}/cart`,{data:{product_id:o,qty:n}}).then((e=>{r.data=e.data.data,r.message=e.data.message,s.value="",c()})).catch((e=>{console.dir(e),s.value=""}))}function i(o){s.value=o,e.delete(`${t}api/${a}/cart/${o}`).then((e=>{r.message=e.data.message,s.value="",c()})).catch((e=>{console.dir(e),s.value=""}))}function u(o,n){s.value=o,e.put(`${t}api/${a}/cart/${o}`,{data:{data:{product_id:o,qty:n}}}).then((e=>{r.message=e.data.message,s.value="",c()})).catch((e=>{console.dir(e),s.value=""}))}function l(){e.delete(`${t}api/${a}/carts`).then((e=>{r.message=e.data.message,c()})).catch((e=>{console.dir(e)}))}return{cartData:r,isLoading:s,handleAddCart:d,handleGetCart:c,handleDeleteCart:i,handleUpdateCart:u,handleClearCart:l}}));const p=(0,r.Q_)("order",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",{handleGetCart:r}=l(),s=(0,n.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),c=(0,n.qj)({success:!1,orders:[],pagination:{},message:[]});function d(o){e.post(`${t}api/${a}/order`,{data:{user:{name:o.name,email:o.email,tel:o.tel,address:o.address},message:o.message}}).then((e=>{s.success=e.data.success,s.message=e.data.message,s.total=e.data.total,s.create_at=e.data.create_at,s.orderId=e.data.orderId,r()})).catch((e=>{console.dir(e)}))}function i(){e.get(`${t}api/${a}/orders`).then((e=>{c.success=e.data.success,c.orders=e.data.orders,c.pagination=e.data.pagination,c.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:s,orderList:c,handleSendOrder:d,handleGetOrderList:i}}));function h(){const e=d(),t=i(),a=u(),o=p(),n=l();return{adminStore:e,adminProductStore:t,productStore:a,orderStore:o,cartStore:n}}},8979:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var o=a(6252),n=a(9963);const r={class:"flex justify-center items-center h-screen bg-gray-50"},s={class:"container max-w-lg"},c=(0,o._)("legend",{class:"text-4xl text-center"},"請先登入",-1),d={class:"space-y-4"},i=(0,o._)("label",{for:"name",class:"block"},"使用者帳號",-1),u={class:"space-y-4"},l=(0,o._)("label",{for:"password",class:"block"},"使用者密碼",-1),p=(0,o._)("button",{type:"submit",class:"py-4 w-full text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition duration-300"}," 登入 ",-1);function h(e,t,a,h,m,g){return(0,o.wg)(),(0,o.iD)("main",r,[(0,o._)("div",s,[(0,o._)("form",{class:"p-8 space-y-8 bg-white rounded shadow-sm",onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>h.handlerSubmit&&h.handlerSubmit(...e)),["prevent"]))},[c,(0,o._)("div",d,[i,(0,o.wy)((0,o._)("input",{id:"name",type:"text",name:"userName",placeholder:"請輸入帳號Email","onUpdate:modelValue":t[0]||(t[0]=e=>h.userName=e),class:"p-2 w-full text-primary-800 border focus:text-primary-600 bg-gray-50 rounded focus:ring-primary-500 invalid:border-primary-600 invalid:text-primary-600"},null,512),[[n.nr,h.userName,void 0,{trim:!0}]])]),(0,o._)("div",u,[l,(0,o.wy)((0,o._)("input",{id:"password",type:"password",class:"p-2 w-full text-primary-800 bg-gray-50 rounded border invalid:text-primary-600 invalid:border-primary-600 focus:text-primary-600 focus:ring-primary-500","onUpdate:modelValue":t[1]||(t[1]=e=>h.userPassword=e),placeholder:"請輸入密碼"},null,512),[[n.nr,h.userPassword]])]),p],32)])])}var m=a(2262),g=a(2119),f=a(1219),v={setup(){const e="https://vue3-course-api.hexschool.io/v2/",t=(0,o.f3)("axios"),{adminStore:a}=(0,f.Z)(),{handleSetLogin:n,handleGetToken:r}=a,s=(0,g.tv)(),c=(0,m.iH)(""),d=(0,m.iH)("");function i(){const a=c.value,o=d.value;t.post(`${e}/admin/signin`,{username:a,password:o}).then((e=>{const t={token:e.data.token,expired:e.data.expired};n(t),s.push("/admin")})).catch((e=>{console.dir(e)}))}return(0,o.bv)((()=>{const e=r();""!==e[0]&&void 0!==e[0]&&s.push("/admin")})),{userName:c,userPassword:d,handlerSubmit:i}}},$=a(3744);const k=(0,$.Z)(v,[["render",h]]);var y=k}}]);
//# sourceMappingURL=979.06c481db.js.map